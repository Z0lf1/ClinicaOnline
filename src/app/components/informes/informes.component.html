<section style="display: flex; flex-direction: column; align-items: center; width: 100%;">

  <!-- ====== TURNOS ====== -->
  <h2>Turnos</h2>
  
  <!-- Contenedor de gr√°ficos de torta -->
  <div style="display: flex; gap: 20px; width: 100%; max-width: 1200px; flex-wrap: wrap; background-color: #f3f3f3; padding: 30px; border-radius: 16px; ">

    <!-- Gr√°fico de Turnos por Especialidad -->
    <div style="flex: 1; min-width: 300px;">
      <h3 style="text-align: center;">Turnos por Especialidad</h3>
      <div style="margin-bottom: 1rem;">
        <canvas
          baseChart
          [data]="{
            labels: pieChartLabels,
            datasets: [{ data: pieChartData, backgroundColor: ['#42A5F5', '#66BB6A', '#FFA726', '#AB47BC', '#FF7043'] }]
          }"
          [type]="'pie'"
          [options]="pieChartOptions">
        </canvas>
      </div>
      <div style="display: flex; gap: 10px; justify-content: center; margin-bottom: 2rem ;">
        <button (click)="exportToExcelTurnosPorEspecialidad()">üìä Exportar a Excel</button>
        <button (click)="exportToPDFTurnosPorEspecialidad()">üñ®Ô∏è Exportar a PDF</button>
      </div>
    </div>

    <!-- Gr√°fico de Turnos por D√≠as -->
    <div style="flex: 1; min-width: 300px;">
      <h3 style="text-align: center;">Turnos por D√≠as</h3>
      <div style="margin-bottom: 1rem;">
        <canvas
          #pieChartDia
          baseChart
          [data]="{
            labels: pieChartTurnosPorDiaLabels,
            datasets: [{
              data: pieChartTurnosPorDiaData,
              backgroundColor: ['#FFA726', '#66BB6A', '#AB47BC', '#42A5F5', '#FF7043', '#26C6DA']
            }]
          }"
          [type]="'pie'"
          [options]="pieChartTurnosPorDiaOptions">
        </canvas>
      </div>
      <div style="display: flex; gap: 10px; justify-content: center; margin-bottom: 2rem;">
        <button (click)="exportToExcelTurnosPorDia()">üìä Exportar a Excel</button>
        <button (click)="exportToPDFTurnosPorDia()">üñ®Ô∏è Exportar a PDF</button>
      </div>
    </div>

  </div>

  <!-- ====== TURNOS POR M√âDICO (BARRAS) ====== -->
  <div style="width: 100%; max-width: 1200px; margin-top: 2rem; background-color: #f3f3f3;  padding: 30px; border-radius: 16px;">
    <h3 style="text-align: center;">Turnos por M√©dico (Pendientes vs Realizados)</h3>
        <div style="height: 400px;">
      <canvas
        #barChartTurnosPorMedico
        baseChart
        [data]="barChartMedicosData"
        [type]="'bar'"
        [options]="barChartMedicosOptions">
      </canvas>
    </div>
  </div>

  <!-- ====== INGRESOS AL SISTEMA ====== -->
  <div style="display: flex; flex-direction: column; align-items: center; margin-top: 3rem; width: 100%; max-width: 1200px; background-color: #f3f3f3; padding: 30px; border-radius: 16px;">
    
    <h2>Ingresos al Sistema</h2>

    <!-- Filtros por fecha -->
    <div class="filtros-fecha" style="margin-bottom: 1rem;">
      <label>Desde:</label>
      <input type="date" [(ngModel)]="fechaDesde" (change)="aplicarFiltro()">

      <label>Hasta:</label>
      <input type="date" [(ngModel)]="fechaHasta" (change)="aplicarFiltro()">
    </div>

    <!-- Contenedor gr√°fico + tabla -->
    <div style="display: flex; gap: 20px; width: 100%; max-width: 1200px; flex-wrap: wrap;">
      
      <!-- Gr√°fico de ingresos -->
      <div style="flex: 1; min-width: 300px; height: 400px;">
        <canvas
          #timelineChart
          baseChart
          [type]="'scatter'"
          [data]="timelineChartData"
          [options]="timelineChartOptions"
          style="width: 100%; height: 100%;">
        </canvas>
      </div>

      <!-- Tabla de ingresos con scroll -->
      <div style="flex: 1; min-width: 300px; max-height: 400px; overflow-y: auto; border: 1px solid #ccc;">
        <table style="width: 100%; border-collapse: collapse; font-size: 14px;">
          <thead>
            <tr style="background: #f0f0f0; position: sticky; top: 0;">
              <th style="padding: 8px; border: 1px solid #ccc;">Usuario</th>
              <th style="padding: 8px; border: 1px solid #ccc;">D√≠a</th>
              <th style="padding: 8px; border: 1px solid #ccc;">Horario</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let log of listaLogsIngresos">
              <td style="padding: 8px; border: 1px solid #ccc;">{{ log.usuario }}</td>
              <td style="padding: 8px; border: 1px solid #ccc;">{{ log.dia }}</td>
              <td style="padding: 8px; border: 1px solid #ccc;">{{ log.hora }}</td>
            </tr>
          </tbody>
        </table>
      </div>

    </div>

    <!-- Botones de exportaci√≥n de ingresos -->
    <div style="display: flex; gap: 10px; justify-content: center; margin-top: 1rem;">
      <button (click)="exportToExcelIngresos()">üìä Exportar Ingresos a Excel</button>
      <button (click)="exportToPDFIngresos()">üñ®Ô∏è Exportar Ingresos a PDF</button>
    </div>
  </div>

</section>
